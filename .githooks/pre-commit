#!/usr/bin/env bash
set -euo pipefail

# If pre-commit is available, use it; otherwise fall back to local lints
if command -v pre-commit >/dev/null 2>&1 && [[ -f ".pre-commit-config.yaml" ]]; then
  pre-commit run --all-files --hook-stage commit
  exit $?
fi

# Fallback: run linters directly
python3 -m scripts.lint_doc_links
python3 -m scripts.lint_umlauts
python3 -m scripts.validate_index
python3 -m scripts.lint_arena
python3 -m scripts.lint_chronopolis
python3 -m scripts.check_lint_anchors

echo "pre-commit (fallback): OK"

